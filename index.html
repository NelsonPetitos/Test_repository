<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>Test api</title>
</head>
<body>
	<h1>La page d'achat du client.</h1>
	<span id="wearetechapi"></span>

	<script>
		var balise = document.getElementById("wearetechapi");


		if(balise == null){
			balise = document.getElementsByName("wearetechapi");
		}
		if(balise != null){
			var newButton = document.createElement("button");
			newButton.id = "wearetechapi";
			newButton.innerHTML = "Mobile money payment";
			balise.parentNode.replaceChild(newButton, balise);
			newButton.addEventListener("click", function(){
				// location.href = "https://paiementback.herokuapp.com";
				var xhttp;

				if(window.XMLHttpRequest){
					xhttp = new XMLHttpRequest();
				}else{
					xhttp = new ActiveXObject("Microsoft.XMLHTTP");
				}
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						alert(this.getResponseHeader());
						balise = document.getElementsByName("wearetechapi");
						balise.parentNode.appendChild(this.responseXML);
//						var modal = document.getElementById('myModal');
//						modal.style.display = "block";
					}else if(this.readyState == 4){
						alert(this.status);
					}
				};
				xhttp.open("GET", "https://paiementback.herokuapp.com/initpopup", true);
				xhttp.send()
			})
		}
	</script>
</body>
</html>