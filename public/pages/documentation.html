<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <title>Documentation</title>
        <link rel="stylesheet" href="css/ionicons.min.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/code.css">
        <link rel="stylesheet" href="css/blackboard.css">
    </head>
    <body id="top">
        <header id="navigation" class="navbar-fixed-top animated-header">
            <div class="container">
                <div class="navbar-header">
                    <!-- responsive nav button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- /responsive nav button -->

                    <!-- logo -->
                    <h1 class="navbar-brand">
                        <a href="#body"><img src="img/logo.png" /></a>
                    </h1>
                    <!-- /logo -->
                </div>

                <!-- main nav -->
                <nav class="collapse navbar-collapse navbar-right" role="navigation">
                    <ul id="nav" class="nav navbar-nav menu">
                        <li><a href="/">Accueil</a></li>
                        <li><a href="#">Produits</a></li>
                        <li class="active"><a href="/documentation">Documentation</a></li>
                        <li><a href="#">Entreprise</a></li>
                        <li><a href="#">Support</a></li>
                        <li><a href="#">Gérer son compte</a></li>
                    </ul>
                </nav>
                <!-- /main nav -->

            </div>
        </header>


        <div class="wrapper">
            <section id="global-header">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="block text-center">
                                <h1>Wearetechapi</h1>
                                <p>Api mobile money</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="blog-left">
                <div class="container">
                    <div class="row">

                        <div class="col-md-3 col-md-offset-0 col-sm-4">
                            <!--<div class="widget">-->
                                <!--<form>-->
                                    <!--<i class="fa fa-search"></i>-->
                                    <!--<input type="text" name="search" class="" placeholder="TYPE KEYWORD HERE...">-->
                                <!--</form>-->
                            <!--</div>-->
                            <div class="widget">
                                <span>Installation</span>
                                <div class="widget-body">
                                    <ul class="category-list">
                                        <li><a href="#">Description</a></li>
                                        <li><a href="#">Le boutton</a></li>
                                        <li><a href="#">Le code javascriptr</a></li>
                                        <li><a href="#">Le callback</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="widget">
                                <span>Souscription</span>
                                <div class="widget-body">
                                    <ul class="category-list">
                                        <li><a href="#">Lorem ipsum</a></li>
                                        <li><a href="#">Lorem ipsum</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-8 col-md-offset-1 col-sm-10 col-sm-offset-1" >
                            <div class="documentation__block">
                                <h2>Description</h2>
                                <p>vous permet d’intégrer comme  fonctionnalité a vos applications webs, le paiement des factures  d’achat en ligne en utilisant le compte mobile money des internautes. Pour le mettre en oeuvre, rien de plus simple </p>
                            </div>
                            <div class="documentation__block">
                                <h2>Le boutton</h2>
                                <p>Il faut commencer par créer une balise (div, span, button ou tout autre tag html) dans votre page web en precisant “wearetechapi” comme identifiant de cette balise.</p>

                            </div>
                            <div class="documentation__block">
                                <h2>Le code javascript</h2>
                                <p>Insérrer ensuite le script suivant dans votre page ( ou dans un fichier que vous inclurez dans votre page).</p>
                                <pre>

                                    <code data-language="javascript">
                                        function setWearetechButton(){
                                            var balise = document.getElementById("wearetechapi");
                                            if(balise == null){
                                                alert("Créer un tag avec pour identifiant wearetechapi");
                                                return;
                                            }
                                            var texte = balise.innerHTML;
                                            var numone = balise.dataset.numone;
                                            var numtwo = balise.dataset.numtwo;
                                            var newButton = document.createElement("button");

                                            if(texte){
                                                newButton.innerHTML = texte;
                                            }else{
                                                newButton.innerHTML = "Mobile money payment";
                                            }

                                            if(numone){
                                                newButton.dataset.numone = numone;
                                            }else{
                                                newButton.dataset.numone = 78;
                                            }

                                            if(numtwo){
                                                newButton.dataset.numtwo = numtwo;
                                            }else{
                                                newButton.dataset.numtwo = 54;
                                            }

                                            balise.parentNode.replaceChild(newButton, balise);
                                            newButton.addEventListener("click", function(){
                                                var xhttp;
                                                if(window.XDomainRequest){
                                                    xhttp = new XDomainRequest();
                                                    console.log("Le navigateur prend en compte le XDoamainRequest");
                                                }else if(window.XMLHttpRequest){
                                                    xhttp = new XMLHttpRequest();
                                                    console.log("Le navigateur prend en compte le XMLHttpRequest");
                                                }else{
                                                    alert("");
                                                    return;
                                                }
                                                xhttp.onload = function() {
                                                    if(this.readyState == 4 && this.status == 200){
                                                        document.body.insertAdjacentHTML('beforeend', this.responseText);
                                                        var coupe = this.responseText.split("&lt;script&gt;");
                                                var javcsrpt = coupe[1].split("<\/script>");
                                                eval(javcsrpt[0]);
                                                }
                                                }

                                                var numone = this.dataset.numone;
                                                var numtwo = this.dataset.numtwo;
                                                //xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                                                xhttp.open("GET", "https://paiementback.herokuapp.com/initpopup?numone="+numone+"&numtwo="+numtwo, true);
                                                xhttp.send();
                                            })
                                        }
                                        window.onload = function () {
                                            setWearetechButton();
                                        }

                                        function wearetechPaymentBack(status, data) {
                                            alert("Response status is : " + status.statusText + "\n\nThe result is : " + data.somme);
                                        }
                                    </code>
                                </pre>
                            <div class="documentation__block">
                                <h2>Le callback</h2>
                                <p>Implémenter la fonction Javascript avec la signature suivante : </p>
                                <pre class="">
                                    <code data-language="javascript" >
                                    function wearetechPaymentBack(status, data) {
                                        alert("Response status is : " + status.statusText + "\n\nThe result is : " + data.somme);
                                    }
                                    </code>
                                </pre>
                                <ol>
                                    <li>
                                        Status est le JSON suivant :
                                        <pre class="">
                                            <code data-language="javascript" >
                                            {
                                                status: Integer,
                                                statusText: String,
                                            }
                                            </code>
                                        </pre>
                                        <ol type="a">
                                            <li>- &nbsp;200 : La requette c’est execute avec succès.</li>
                                            <li>- &nbsp;500 : Le serveur est hors service.</li>
                                            <li>- &nbsp;400 : Le modem est indisponible.</li>
                                        </ol>
                                    </li><br/>

                                    <li>Data est le JSON contenant les résultats d'éxécution de votre demande...</li>
                                </ol>


                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- load Js -->
        <script src="js/jquery-1.11.3.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/rainbow-custom.min.js"></script>
    </body>
</html>